<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STATE Dashboard | PM-AJAY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Configure Tailwind to use the 'dark' class for dark mode
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .sidebar {
            background-color: #ffffff;
        }
        .card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        /* Dark mode specific card styles */
        .dark .card {
            background-color: #1c1b1a;
            border: 1px solid #374151; /* gray-700 */
            box-shadow: none;
        }
        .dark .card:hover {
            background-color: #2c2b2a;
        }
    </style>
</head>
<body class="flex min-h-screen bg-[#fdfaf6] dark:bg-black">
    <aside class="sidebar w-64 flex-shrink-0 border-r border-slate-200 dark:border-gray-700 flex flex-col dark:bg-[#1c1b1a]">
        <div class="p-6">
            <h1 class="text-2xl font-bold text-slate-800 dark:text-gray-100 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-2 text-indigo-600" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.874 6 7.5 6h5c.626 0 .988-.27 1.256-.579A6.012 6.012 0 0115.668 8.027c.21.34.332.732.332 1.155a3.999 3.999 0 01-4 4c-1.933 0-3.5-1.567-3.5-3.5a3.999 3.999 0 011.006-2.622c.23-.352.484-.65.744-.897C10.5 6.27 10.246 6 10 6h-.5a.5.5 0 00-.5.5v1.5a.5.5 0 00.5.5h.5a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-2a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h.5a.5.5 0 00.5-.5V8.5a.5.5 0 00-.5-.5h-2a.5.5 0 00-.5.5v1.5a.5.5 0 00.5.5H8a.5.5 0 00.5-.5V9.5a3.5 3.5 0 00-3.5-3.5c-.538 0-1.03.123-1.468.342z" clip-rule="evenodd" />
                </svg>
                PM-AJAY
            </h1>
        </div>
        <nav class="flex-1 px-4 py-2">
            <a href="state.html" class="flex items-center px-4 py-2.5 text-slate-700 bg-indigo-50 dark:bg-white dark:text-slate-900 rounded-lg font-semibold">
                <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3 text-indigo-600 dark:text-indigo-600"></i>
                Dashboard
            </a>
            <a href="projects.html" class="flex items-center px-4 py-2.5 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-gray-700 rounded-lg mt-1 font-medium">
                <i data-lucide="clipboard-list" class="w-5 h-5 mr-3"></i>
                Projects
            </a>
            <a href="agencies.html" class="flex items-center px-4 py-2.5 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-gray-700 rounded-lg mt-1 font-medium">
                <i data-lucide="building" class="w-5 h-5 mr-3"></i>
                Agencies
            </a>
            <a href="#" class="flex items-center px-4 py-2.5 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-gray-700 rounded-lg mt-1 font-medium">
                <i data-lucide="landmark" class="w-5 h-5 mr-3"></i>
                Fund Flow
            </a>
            <a href="#" class="flex items-center px-4 py-2.5 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-gray-700 rounded-lg mt-1 font-medium">
                <i data-lucide="settings" class="w-5 h-5 mr-3"></i>
                Settings
            </a>
        </nav>
        <div class="p-4 mt-auto">
             <div class="bg-slate-100 dark:bg-gray-800 rounded-lg p-4 text-center">
                <i data-lucide="help-circle" class="w-10 h-10 mx-auto text-slate-500 dark:text-gray-400"></i>
                <p class="text-sm text-slate-600 dark:text-gray-300 mt-2">Need help with the portal?</p>
                <button class="mt-3 w-full bg-indigo-600 text-white py-2 rounded-lg text-sm font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-500">Contact Support</button>
            </div>
            <a href="./login.html" class="flex items-center px-4 py-4 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-gray-700 rounded-lg mt-4 font-medium">
                <i data-lucide="log-out" class="w-5 h-5 mr-3"></i>
                Sign Out
            </a>
        </div>
    </aside>

    <main class="flex-1 p-6 lg:p-8">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8">
            <div>
                <h2 class="text-3xl font-bold text-slate-800 dark:text-gray-100">State Level Dashboard</h2>
                <p class="text-slate-500 dark:text-gray-400 mt-1">Real-time overview of PM-AJAY components</p>
            </div>
            <div class="flex items-center mt-4 sm:mt-0">
                 <div class="flex items-center space-x-4">
                    <button class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-gray-700">
                        <i data-lucide="bell" class="w-5 h-5 text-slate-600 dark:text-gray-400"></i>
                    </button>
                     <button id="theme-toggle" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-gray-700">
                        <i data-lucide="sun" id="theme-toggle-light-icon" class="w-5 h-5 text-slate-600 dark:text-gray-400"></i>
                        <i data-lucide="moon" id="theme-toggle-dark-icon" class="w-5 h-5 text-slate-600 dark:text-gray-400 hidden"></i>
                    </button>
                </div>
                <div class="flex items-center ml-6">
                    <img src="https://placehold.co/40x40/E2E8F0/475569?text=BDO" alt="BDO" class="w-10 h-10 rounded-full">
                    <div class="ml-3">
                        <p class="font-semibold text-slate-800 dark:text-gray-100">Mr. Alok Verma</p>
                        <p class="text-sm text-slate-500 dark:text-gray-400">BDO, Pusa Block</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="card p-5">
                <div class="flex justify-between items-start">
                    <h3 class="text-slate-500 dark:text-gray-400 font-medium">Total Projects</h3>
                    <div class="p-2 bg-indigo-100 dark:bg-indigo-500/10 rounded-md">
                        <i data-lucide="clipboard-list" class="w-5 h-5 text-indigo-600 dark:text-indigo-400"></i>
                    </div>
                </div>
                <p class="text-4xl font-bold text-slate-800 dark:text-gray-100 mt-2">201</p>
                <p class="text-sm text-green-600 flex items-center mt-1">
                    <i data-lucide="arrow-up" class="w-4 h-4 mr-1"></i>
                    <span>8.2%</span> <span class="text-slate-500 dark:text-gray-400 ml-1">vs last month</span>
                </p>
            </div>
            <div class="card p-5">
                 <div class="flex justify-between items-start">
                    <h3 class="text-slate-500 dark:text-gray-400 font-medium">Approved Projects</h3>
                    <div class="p-2 bg-green-100 dark:bg-green-500/10 rounded-md">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-600 dark:text-green-400"></i>
                    </div>
                </div>
                <p class="text-4xl font-bold text-slate-800 dark:text-gray-100 mt-2">136</p>
                <p class="text-sm text-green-600 flex items-center mt-1">
                    <i data-lucide="arrow-up" class="w-4 h-4 mr-1"></i>
                    <span>10.5%</span> <span class="text-slate-500 dark:text-gray-400 ml-1">vs last month</span>
                </p>
            </div>
             <div class="card p-5">
                <div class="flex justify-between items-center">
                    <div>
                        <h3 class="text-slate-500 dark:text-gray-400 font-medium">Executing Agencies</h3>
                        <p class="text-4xl font-bold text-slate-800 dark:text-gray-100 mt-2">28</p>
                    </div>
                    <div class="w-20 h-20">
                        <canvas id="agenciesChart"></canvas>
                    </div>
                </div>
            </div>
             <div class="card p-5">
                 <div class="flex justify-between items-center">
                    <div>
                        <h3 class="text-slate-500 dark:text-gray-400 font-medium">Villages Covered</h3>
                        <p class="text-4xl font-bold text-slate-800 dark:text-gray-100 mt-2">78</p>
                    </div>
                    <div class="w-20 h-20">
                        <canvas id="villagesChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-8">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-slate-800 dark:text-gray-100">District Project Progress</h3>
                <button class="flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300">
                    View All Projects <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                </button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="card p-5 flex flex-col">
                    <div>
                        <h4 class="font-semibold text-slate-800 dark:text-gray-100">North Delhi Infra Grant</h4>
                        <p class="text-sm text-slate-500 dark:text-gray-400 mt-1">District: North Delhi</p>
                    </div>
                    <div class="mt-4">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-xs font-medium text-slate-600 dark:text-gray-300">Progress</span>
                            <span class="text-sm font-bold text-yellow-600 dark:text-yellow-400">75%</span>
                        </div>
                        <div class="w-full bg-slate-200 dark:bg-gray-700 rounded-full h-2.5">
                            <div class="bg-yellow-500 h-2.5 rounded-full" style="width: 75%;"></div>
                        </div>
                    </div>
                    <div class="mt-4">
                         <span class="bg-yellow-100 text-yellow-800 dark:bg-yellow-500/10 dark:text-yellow-400 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">In Progress</span>
                    </div>
                    <div class="mt-auto pt-4">
                         <button class="view-details-btn w-full text-center py-2 px-4 bg-indigo-50 dark:bg-gray-700 text-indigo-700 dark:text-gray-200 rounded-lg text-sm font-semibold hover:bg-indigo-100 dark:hover:bg-gray-600">View Details</button>
                    </div>
                </div>

                <div class="card p-5 flex flex-col">
                    <div>
                        <h4 class="font-semibold text-slate-800 dark:text-gray-100">West Delhi Skill Center</h4>
                        <p class="text-sm text-slate-500 dark:text-gray-400 mt-1">District: West Delhi</p>
                    </div>
                    <div class="mt-4">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-xs font-medium text-slate-600 dark:text-gray-300">Progress</span>
                            <span class="text-sm font-bold text-green-600 dark:text-green-400">100%</span>
                        </div>
                        <div class="w-full bg-slate-200 dark:bg-gray-700 rounded-full h-2.5">
                            <div class="bg-green-500 h-2.5 rounded-full" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="mt-4">
                         <span class="bg-green-100 text-green-800 dark:bg-green-500/10 dark:text-green-400 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">Completed</span>
                    </div>
                    <div class="mt-auto pt-4">
                         <button class="view-details-btn w-full text-center py-2 px-4 bg-indigo-50 dark:bg-gray-700 text-indigo-700 dark:text-gray-200 rounded-lg text-sm font-semibold hover:bg-indigo-100 dark:hover:bg-gray-600">View Details</button>
                    </div>
                </div>

                <div class="card p-5 flex flex-col">
                    <div>
                        <h4 class="font-semibold text-slate-800 dark:text-gray-100">South Delhi Hostels</h4>
                        <p class="text-sm text-slate-500 dark:text-gray-400 mt-1">District: South Delhi</p>
                    </div>
                    <div class="mt-4">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-xs font-medium text-slate-600 dark:text-gray-300">Progress</span>
                            <span class="text-sm font-bold text-blue-600 dark:text-blue-400">10%</span>
                        </div>
                        <div class="w-full bg-slate-200 dark:bg-gray-700 rounded-full h-2.5">
                            <div class="bg-blue-500 h-2.5 rounded-full" style="width: 10%;"></div>
                        </div>
                    </div>
                    <div class="mt-4">
                         <span class="bg-blue-100 text-blue-800 dark:bg-blue-500/10 dark:text-blue-400 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">Initiated</span>
                    </div>
                    <div class="mt-auto pt-4">
                         <button class="view-details-btn w-full text-center py-2 px-4 bg-indigo-50 dark:bg-gray-700 text-indigo-700 dark:text-gray-200 rounded-lg text-sm font-semibold hover:bg-indigo-100 dark:hover:bg-gray-600">View Details</button>
                    </div>
                </div>

                <div class="card p-5 flex flex-col">
                    <div>
                        <h4 class="font-semibold text-slate-800 dark:text-gray-100">East Delhi Adarsh Gram</h4>
                        <p class="text-sm text-slate-500 dark:text-gray-400 mt-1">District: East Delhi</p>
                    </div>
                    <div class="mt-4">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-xs font-medium text-slate-600 dark:text-gray-300">Progress</span>
                            <span class="text-sm font-bold text-red-600 dark:text-red-400">35%</span>
                        </div>
                        <div class="w-full bg-slate-200 dark:bg-gray-700 rounded-full h-2.5">
                            <div class="bg-red-500 h-2.5 rounded-full" style="width: 35%;"></div>
                        </div>
                    </div>
                    <div class="mt-4">
                         <span class="bg-red-100 text-red-800 dark:bg-red-500/10 dark:text-red-400 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">Delayed</span>
                    </div>
                    <div class="mt-auto pt-4">
                         <button class="view-details-btn w-full text-center py-2 px-4 bg-indigo-50 dark:bg-gray-700 text-indigo-700 dark:text-gray-200 rounded-lg text-sm font-semibold hover:bg-indigo-100 dark:hover:bg-gray-600">View Details</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6">
            <div class="card lg:col-span-2 p-5">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-slate-800 dark:text-gray-100">Project Status Dynamics</h3>
                     <select class="border border-slate-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 rounded-md text-sm px-2 py-1">
                        <option>2024-25</option>
                        <option>2023-24</option>
                    </select>
                </div>
                <div style="height: 300px;">
                    <canvas id="projectStatusChart"></canvas>
                </div>
            </div>
            <div class="flex flex-col gap-6">
                 <div class="card p-5">
                      <div class="flex items-start justify-between">
                           <div>
                                <h3 class="text-slate-500 dark:text-gray-400 font-medium">Funds Allocated</h3>
                                <p class="text-3xl font-bold text-slate-800 dark:text-gray-100 mt-2">₹4.52 Cr</p>
                                <p class="text-sm text-slate-500 dark:text-gray-400 mt-1">Current Financial Year</p>
                           </div>
                           <div class="relative w-16 h-16">
                                <svg class="w-full h-full" viewBox="0 0 36 36">
                                    <path class="text-slate-200 dark:text-gray-700" stroke-width="3" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                    <path class="text-indigo-600" stroke-width="3" stroke-dasharray="85, 100" stroke-linecap="round" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                 </svg>
                                 <div class="absolute inset-0 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold">85%</div>
                           </div>
                      </div>
                 </div>
                 <div class="card p-5">
                      <div class="flex items-start justify-between">
                           <div>
                                <h3 class="text-slate-500 dark:text-gray-400 font-medium">Funds Utilized</h3>
                                <p class="text-3xl font-bold text-slate-800 dark:text-gray-100 mt-2">₹3.84 Cr</p>
                                 <p class="text-sm text-slate-500 dark:text-gray-400 mt-1">Current Financial Year</p>
                           </div>
                           <div class="relative w-16 h-16">
                                <svg class="w-full h-full" viewBox="0 0 36 36">
                                    <path class="text-slate-200 dark:text-gray-700" stroke-width="3" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                    <path class="text-green-600" stroke-width="3" stroke-dasharray="75, 100" stroke-linecap="round" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                 </svg>
                                  <div class="absolute inset-0 flex items-center justify-center text-green-600 dark:text-green-400 font-bold">75%</div>
                           </div>
                      </div>
                 </div>
            </div>
        </div>

        <div class="card mt-6 p-5">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-slate-800 dark:text-gray-100">Agency Work Allocation</h3>
                <button class="flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300">
                    View All <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                </button>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left text-sm">
                    <thead class="text-xs text-slate-500 dark:text-gray-400 uppercase bg-slate-50 dark:bg-gray-800">
                        <tr>
                            <th scope="col" class="px-6 py-3">Project Name</th>
                            <th scope="col" class="px-6 py-3">Executing Agency</th>
                            <th scope="col" class="px-6 py-3">Start Date</th>
                            <th scope="col" class="px-6 py-3">Status</th>
                            <th scope="col" class="px-6 py-3">Budget</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="bg-white dark:bg-[#1c1b1a] border-b dark:border-gray-700">
                            <td class="px-6 py-4 font-medium text-slate-900 dark:text-gray-100">Hostel Construction, Rampur</td>
                            <td class="px-6 py-4 dark:text-gray-300">State PWD</td>
                            <td class="px-6 py-4 dark:text-gray-300">22.08.2024</td>
                            <td class="px-6 py-4"><span class="bg-green-100 text-green-800 dark:bg-green-500/10 dark:text-green-400 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">Completed</span></td>
                            <td class="px-6 py-4 font-medium dark:text-gray-200">₹90 Lakh</td>
                        </tr>
                        <tr class="bg-white dark:bg-[#1c1b1a] border-b dark:border-gray-700">
                            <td class="px-6 py-4 font-medium text-slate-900 dark:text-gray-100">Adarsh Gram Infra, Mohanpur</td>
                            <td class="px-6 py-4 dark:text-gray-300">Block Panchayat</td>
                            <td class="px-6 py-4 dark:text-gray-300">15.06.2024</td>
                            <td class="px-6 py-4"><span class="bg-yellow-100 text-yellow-800 dark:bg-yellow-500/10 dark:text-yellow-400 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">In Progress</span></td>
                            <td class="px-6 py-4 font-medium dark:text-gray-200">₹1.2 Cr</td>
                        </tr>
                        <tr class="bg-white dark:bg-[#1c1b1a] border-b dark:border-gray-700">
                            <td class="px-6 py-4 font-medium text-slate-900 dark:text-gray-100">Skill Dev Center (GIA)</td>
                            <td class="px-6 py-4 dark:text-gray-300">Pratham NGO</td>
                            <td class="px-6 py-4 dark:text-gray-300">01.09.2024</td>
                            <td class="px-6 py-4"><span class="bg-blue-100 text-blue-800 dark:bg-blue-500/10 dark:text-blue-400 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">Initiated</span></td>
                            <td class="px-6 py-4 font-medium dark:text-gray-200">₹25 Lakh</td>
                        </tr>
                        <tr class="bg-white dark:bg-[#1c1b1a] dark:border-gray-700">
                           <td class="px-6 py-4 font-medium text-slate-900 dark:text-gray-100">Community Hall, Sitapur</td>
                            <td class="px-6 py-4 dark:text-gray-300">Zila Parishad</td>
                            <td class="px-6 py-4 dark:text-gray-300">10.05.2024</td>
                            <td class="px-6 py-4"><span class="bg-red-100 text-red-800 dark:bg-red-500/10 dark:text-red-400 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">Delayed</span></td>
                            <td class="px-6 py-4 font-medium dark:text-gray-200">₹40 Lakh</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="details-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
            <div class="card w-full max-w-2xl max-h-[90vh] flex flex-col">
                <div class="flex justify-between items-center p-5 border-b border-slate-200 dark:border-gray-700">
                    <h3 class="text-lg font-semibold text-slate-800 dark:text-gray-100">Project Details: North Delhi Infra Grant</h3>
                    <button id="close-modal-btn" class="p-1 rounded-full hover:bg-slate-200 dark:hover:bg-gray-700">
                        <i data-lucide="x" class="w-5 h-5 text-slate-600 dark:text-gray-400"></i>
                    </button>
                </div>

                <div class="p-6 overflow-y-auto">
                    <div class="mb-6">
                        <h4 class="font-semibold text-slate-700 dark:text-gray-200 mb-2">Supervisor Information</h4>
                        <div class="flex items-center">
                            <img src="https://placehold.co/48x48/E2E8F0/475569?text=AS" alt="Supervisor" class="w-12 h-12 rounded-full">
                            <div class="ml-4">
                                <p class="font-bold text-slate-800 dark:text-gray-100">Anjali Sharma</p>
                                <p class="text-sm text-slate-500 dark:text-gray-400">Junior Engineer, PWD</p>
                                <p class="text-sm text-slate-500 dark:text-gray-400">Contact: +91 987XXXXX21</p>
                            </div>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h4 class="font-semibold text-slate-700 dark:text-gray-200 mb-2">Financials</h4>
                        <div class="flex justify-between items-center mb-1 text-sm">
                            <span class="text-slate-600 dark:text-gray-300">Funds Utilized</span>
                            <span class="font-bold text-slate-800 dark:text-gray-100">₹60 Lakh / ₹80 Lakh</span>
                        </div>
                        <div class="w-full bg-slate-200 dark:bg-gray-700 rounded-full h-3">
                            <div class="bg-yellow-500 h-3 rounded-full" style="width: 75%;"></div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div>
                            <h4 class="font-semibold text-slate-700 dark:text-gray-200">Workers Hired</h4>
                            <p class="text-2xl font-bold text-slate-800 dark:text-gray-100">45</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-slate-700 dark:text-gray-200">Days Remaining</h4>
                            <p class="text-2xl font-bold text-slate-800 dark:text-gray-100">22</p>
                            <p class="text-xs text-slate-500 dark:text-gray-400">End Date: 03 Nov, 2025</p>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-semibold text-slate-700 dark:text-gray-200 mb-2">Uploaded Proof (Photos)</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <img src="https://placehold.co/200x150/cccccc/666666?text=Site+Photo+1" alt="Proof 1" class="rounded-lg object-cover w-full h-28">
                            <img src="https://placehold.co/200x150/cccccc/666666?text=Site+Photo+2" alt="Proof 2" class="rounded-lg object-cover w-full h-28">
                            <img src="https://placehold.co/200x150/cccccc/666666?text=Invoice+Scan" alt="Proof 3" class="rounded-lg object-cover w-full h-28">
                            <img src="https://placehold.co/200x150/cccccc/666666?text=Material+Delivery" alt="Proof 4" class="rounded-lg object-cover w-full h-28">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Call this once to convert all data-lucide attributes to SVG icons
            lucide.createIcons();

            const themeToggleBtn = document.getElementById('theme-toggle');
            const lightIcon = document.getElementById('theme-toggle-light-icon');
            const darkIcon = document.getElementById('theme-toggle-dark-icon');
            let charts = {};

            const getChartOptions = (isDark) => {
                const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : '#e2e8f0';
                const textColor = isDark ? '#9ca3af' : '#64748b'; /* gray-400 : slate-500 */
                return {
                    doughnut: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '70%',
                        plugins: {
                            legend: { display: false },
                            tooltip: { enabled: true }
                        }
                    },
                    bar: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: { 
                                beginAtZero: true,
                                grid: { color: gridColor },
                                ticks: { color: textColor }
                            },
                            x: {
                                grid: { display: false },
                                ticks: { color: textColor }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                                align: 'end',
                                labels: { color: textColor }
                            }
                        },
                        interaction: {
                            intersect: false,
                            mode: 'index',
                        },
                    }
                };
            };
            
            function createCharts(isDark) {
                const options = getChartOptions(isDark);
                // Chart for Executing Agencies
                const agenciesCtx = document.getElementById('agenciesChart').getContext('2d');
                charts.agencies = new Chart(agenciesCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['PWD', 'Panchayat', 'NGOs'],
                        datasets: [{
                            data: [12, 9, 7],
                            backgroundColor: ['#4f46e5', '#34d399', '#f59e0b'],
                            borderWidth: 0,
                        }]
                    },
                    options: options.doughnut
                });

                // Chart for Villages Covered
                const villagesCtx = document.getElementById('villagesChart').getContext('2d');
                charts.villages = new Chart(villagesCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Adarsh Gram', 'GIA Scheme', 'Hostel Scheme'],
                        datasets: [{
                            data: [30, 28, 20],
                            backgroundColor: ['#10b981', '#3b82f6', '#8b5cf6'],
                            borderWidth: 0,
                        }]
                    },
                    options: options.doughnut
                });

                // Bar Chart for Project Status
                const projectStatusCtx = document.getElementById('projectStatusChart').getContext('2d');
                charts.projectStatus = new Chart(projectStatusCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'],
                        datasets: [
                            {
                                label: 'Completed',
                                data: [5, 7, 10, 8, 12, 15, 13, 16, 18, 20],
                                backgroundColor: '#34d399',
                                borderRadius: 4
                            },
                            {
                                label: 'In Progress',
                                data: [12, 11, 14, 15, 13, 10, 11, 9, 7, 6],
                                backgroundColor: '#60a5fa',
                                borderRadius: 4
                            }
                        ]
                    },
                    options: options.bar
                });
            }
            
            function updateAllChartsTheme(isDark) {
                if (charts.agencies) charts.agencies.destroy();
                if (charts.villages) charts.villages.destroy();
                if (charts.projectStatus) charts.projectStatus.destroy();
                createCharts(isDark);
            }

            // Function to set theme
            const setTheme = (isDark) => {
                if (isDark) {
                    document.documentElement.classList.add('dark');
                    lightIcon.classList.add('hidden');
                    darkIcon.classList.remove('hidden');
                    localStorage.setItem('theme', 'dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    lightIcon.classList.remove('hidden');
                    darkIcon.classList.add('hidden');
                    localStorage.setItem('theme', 'light');
                }
                updateAllChartsTheme(isDark);
            };

            // Initial theme setup
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const savedTheme = localStorage.getItem('theme');
            const isDarkMode = savedTheme === 'dark' || (savedTheme === null && prefersDark);
            
            setTheme(isDarkMode);

            themeToggleBtn.addEventListener('click', () => {
                const isDark = document.documentElement.classList.contains('dark');
                setTheme(!isDark);
            });

            // START: Modal Functionality
            const detailsModal = document.getElementById('details-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const viewDetailsBtns = document.querySelectorAll('.view-details-btn');

            const openModal = () => {
                detailsModal.classList.remove('hidden');
                // Ensure icons inside the modal are rendered
                lucide.createIcons();
            };

            const closeModal = () => {
                detailsModal.classList.add('hidden');
            };

            viewDetailsBtns.forEach(btn => {
                btn.addEventListener('click', openModal);
            });

            closeModalBtn.addEventListener('click', closeModal);

            // Close modal if user clicks on the background overlay
            detailsModal.addEventListener('click', (event) => {
                if (event.target === detailsModal) {
                    closeModal();
                }
            });
            // END: Modal Functionality
        });
    </script>
</body>
</html>
